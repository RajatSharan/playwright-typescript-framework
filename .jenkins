pipeline {
   agent any


   tools {
       nodejs 'NodeJS 22.12.0'  
   }


   stages {
       stage('Checkout') {
           steps {
               withCredentials(credentialsId :
               usernameVariable: "",
               passwordVariable: "")]){
                   sh 'git clone https://github.com/sidharth8891/PlayWrightSessionWithTypeScript.git'
               }
           }
       }


       stage('Install Dependencies') {
           steps {
               sh 'npm ci'
               sh 'npx playwright install'
           }
       }


       stage('Run Playwright Tests') {
           steps {
               sh 'npx playwright test'
           }
       }
   }


   post {
       always {
           publishHTML([
               reportDir: 'playwright-report',
               reportFiles: 'index.html',
               reportName: 'html report'
           ])
           archieveArtifacts  artifacts: 'playwright-report/**'
       }
   }
}




